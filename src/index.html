<!DOCTYPE html>
<html>
<head>
  <title></title>
</head>
<style type="text/css">
  * {
    margin: 0;
    padding: 0;
  }

  .loading-bar {
    width: 100%;
    background: whitesmoke;
  }

  .loading-bar.full .inner {
    width: 100%;
  }

  .inner {
    height: 30px;
    width: 0%;
    background: #41F1FF;
    transition: 200ms ease-in-out all;
  }


</style>
<body>
</body>
<script type="text/javascript">


function setup(n){
  const size = Array(n).fill().map((_, i) => i)
  const html = `
    ${size.map(i => {
      return (`
        <div class="loading-bar bar-${i+1}">
          <div class="inner"></div>
        </div>
      `)
    }).join('')}
  `
  document.body.innerHTML = html
  first = document.querySelector('.bar-1')
  addEvents()
}


function addEvents(){
  const bars = document.querySelectorAll('.loading-bar')

  bars.forEach((el, i) => {
    el.addEventListener('transitionend', transitionEnd, false)
  })

  setTimeout(() => begin())
}

function begin(){
  first.classList.add('full')
}

function transitionEnd() {
  this.removeEventListener('transitionend', transitionEnd, false)

  const bars = Array.from(document.querySelectorAll('.loading-bar'))
  const next = bars[bars.indexOf(this) + 1]
  const first = bars[0]
  
  this.classList.remove('full')

  if (next) {
    next.classList.add('full')
  } else {
    setTimeout( () => addEvents())
  }
}

let first;
setup(10)

</script>
</html>